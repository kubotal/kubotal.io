// ==========================================
// KUBOTAL i18n - Système de traduction FR/EN
// ==========================================

const translations = {
    fr: {
        // Navigation
        nav_home: "Accueil",
        nav_expertise: "Expertise",
        nav_okdp: "OKDP",
        nav_services: "Services",
        nav_contact: "Contact",

        // Hero
        hero_badge: "Contributeur Principal OKDP",
        hero_title_1: "Construisons ensemble",
        hero_title_2: "votre plateforme",
        hero_title_3: "Data & IA",
        hero_subtitle: "Expert en architecture de plateformes data & IA cloud-native et intelligence artificielle",
        hero_btn_services: "Nos Services",
        hero_btn_okdp: "Découvrir OKDP",
        hero_card_1: "Cloud Native",
        hero_card_2: "IA & ML",
        hero_card_3: "Data Platform",
        hero_card_4: "Temps Réel",
        hero_card_5: "Sécurisé",
        hero_card_6: "Scalable",

        // Expertise
        expertise_title: "Notre Expertise",
        expertise_intro: "Spécialisés dans la construction de plateformes data & IA modernes",
        expertise_1_title: "Cloud Native",
        expertise_1_desc: "Architecture cloud-native haute disponibilité et scalable pour vos plateformes data & IA",
        expertise_2_title: "Data Engineering",
        expertise_2_desc: "Pipelines de données robustes et évolutifs avec les technologies modernes",
        expertise_3_title: "Intelligence Artificielle",
        expertise_3_desc: "Solutions ML/AI complètes du développement à la production",
        expertise_4_title: "Query & Analytics",
        expertise_4_desc: "Moteurs de requêtes performants pour l'analyse de vos données",

        // OKDP
        okdp_badge: "Contributeur Principal",
        okdp_title: "OKDP - Open Kubernetes Data Platform",
        okdp_lead: "Nous sommes fiers d'être parmi les contributeurs principaux du projet OKDP, la plateforme de données open-source et cloud-native de référence.",
        okdp_feature_1_title: "Open Source",
        okdp_feature_1_desc: "Plateforme libre sans frais de licence",
        okdp_feature_2_title: "Modulaire",
        okdp_feature_2_desc: "Composants adaptés à vos besoins",
        okdp_feature_3_title: "Cloud Native",
        okdp_feature_3_desc: "Conçu pour Kubernetes",
        okdp_link: "Découvrir OKDP →",

        // Services
        services_title: "Nos Services",
        services_intro: "De la conception à la production, nous vous accompagnons",
        service_1_title: "Conseil & Architecture",
        service_1_desc: "Définition de votre stratégie data & IA avec des architectures modernes (Data Mesh, Data Fabric)",
        service_2_title: "Plateforme Data & IA",
        service_2_desc: "Nous aidons les clients à monter leur plateforme data & IA, basée sur OKDP ou autre technologie selon vos besoins",
        service_3_title: "Développement Sur-Mesure",
        service_3_desc: "Pipelines de données, modèles ML et applications sur votre plateforme",
        service_4_title: "Formation & Support",
        service_4_desc: "Montée en compétences de vos équipes et support technique continu",

        // Contact
        contact_title: "Discutons de votre projet",
        contact_intro: "Prêt à construire votre plateforme data & IA ?",
        contact_name: "Nom complet",
        contact_email: "Email professionnel",
        contact_company: "Entreprise",
        contact_message: "Décrivez-nous votre projet...",
        contact_submit: "Envoyer le message",

        // Footer
        footer_tagline: "Expert en plateformes Data & IA",
        footer_links: "Liens",
        footer_contact: "Contact",
        footer_rights: "Tous droits réservés.",
        footer_legal: "Mentions légales",
        footer_privacy: "Politique de confidentialité",
    },

    en: {
        // Navigation
        nav_home: "Home",
        nav_expertise: "Expertise",
        nav_okdp: "OKDP",
        nav_services: "Services",
        nav_contact: "Contact",

        // Hero
        hero_badge: "Main OKDP Contributor",
        hero_title_1: "Let's build together",
        hero_title_2: "your",
        hero_title_3: "Data & AI platform",
        hero_subtitle: "Expert in cloud-native data & AI platform architecture and artificial intelligence",
        hero_btn_services: "Our Services",
        hero_btn_okdp: "Discover OKDP",
        hero_card_1: "Cloud Native",
        hero_card_2: "AI & ML",
        hero_card_3: "Data Platform",
        hero_card_4: "Real-time",
        hero_card_5: "Secure",
        hero_card_6: "Scalable",

        // Expertise
        expertise_title: "Our Expertise",
        expertise_intro: "Specialized in building modern data & AI platforms",
        expertise_1_title: "Cloud Native",
        expertise_1_desc: "High-availability and scalable cloud-native architecture for your data & AI platforms",
        expertise_2_title: "Data Engineering",
        expertise_2_desc: "Robust and scalable data pipelines with modern technologies",
        expertise_3_title: "Artificial Intelligence",
        expertise_3_desc: "Complete ML/AI solutions from development to production",
        expertise_4_title: "Query & Analytics",
        expertise_4_desc: "High-performance query engines for your data analysis",

        // OKDP
        okdp_badge: "Main Contributor",
        okdp_title: "OKDP - Open Kubernetes Data Platform",
        okdp_lead: "We are proud to be among the main contributors of the OKDP project, the reference open-source and cloud-native data platform.",
        okdp_feature_1_title: "Open Source",
        okdp_feature_1_desc: "Free platform without licensing fees",
        okdp_feature_2_title: "Modular",
        okdp_feature_2_desc: "Components tailored to your needs",
        okdp_feature_3_title: "Cloud Native",
        okdp_feature_3_desc: "Designed for Kubernetes",
        okdp_link: "Discover OKDP →",

        // Services
        services_title: "Our Services",
        services_intro: "From design to production, we support you",
        service_1_title: "Consulting & Architecture",
        service_1_desc: "Define your data & AI strategy with modern architectures (Data Mesh, Data Fabric)",
        service_2_title: "Data & AI Platform",
        service_2_desc: "We help clients build their data & AI platform, based on OKDP or other technology according to your needs",
        service_3_title: "Custom Development",
        service_3_desc: "Data pipelines, ML models and applications on your platform",
        service_4_title: "Training & Support",
        service_4_desc: "Upskilling your teams and continuous technical support",

        // Contact
        contact_title: "Let's discuss your project",
        contact_intro: "Ready to build your data & AI platform?",
        contact_name: "Full name",
        contact_email: "Professional email",
        contact_company: "Company",
        contact_message: "Describe your project...",
        contact_submit: "Send message",

        // Footer
        footer_tagline: "Expert in Data & AI platforms",
        footer_links: "Links",
        footer_contact: "Contact",
        footer_rights: "All rights reserved.",
        footer_legal: "Legal Notice",
        footer_privacy: "Privacy Policy",
    }
};

// État actuel de la langue
let currentLang = localStorage.getItem('lang') || 'en';

// Fonction pour obtenir la traduction
function t(key) {
    return translations[currentLang][key] || key;
}

// Fonction pour changer de langue
function switchLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    updateContent();
    updateLangButtons();
}

// Fonction pour mettre à jour tout le contenu
function updateContent() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = t(key);

        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translation;
        } else {
            element.textContent = translation;
        }
    });

    // Update legal pages links based on language
    updateLegalLinks();

    // Update HTML lang attribute
    document.documentElement.lang = currentLang;
}

// Fonction pour mettre à jour les liens vers les pages légales
function updateLegalLinks() {
    const legalLink = document.getElementById('legal-link');
    const privacyLink = document.getElementById('privacy-link');

    if (legalLink) {
        legalLink.href = currentLang === 'fr' ? 'mentions-legales.html' : 'legal-notice.html';
    }

    if (privacyLink) {
        privacyLink.href = currentLang === 'fr' ? 'politique-confidentialite.html' : 'privacy-policy.html';
    }
}

// Fonction pour mettre à jour l'apparence des boutons de langue
function updateLangButtons() {
    document.querySelectorAll('.lang-btn').forEach(btn => {
        const lang = btn.getAttribute('data-lang');
        if (lang === currentLang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
}

// Initialisation au chargement de la page
document.addEventListener('DOMContentLoaded', () => {
    updateContent();
    updateLangButtons();

    // Add event listeners to language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            switchLanguage(lang);
        });
    });

    // Mobile menu toggle
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const navRight = document.querySelector('.nav-right');
    const navLinks = document.querySelectorAll('.nav-links a');
    const navContactBtn = document.querySelector('.nav-contact-btn');

    if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', () => {
            navRight.classList.toggle('active');
        });

        // Close menu when clicking on a link
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                navRight.classList.remove('active');
            });
        });

        // Close menu when clicking on contact button
        if (navContactBtn) {
            navContactBtn.addEventListener('click', () => {
                navRight.classList.remove('active');
            });
        }

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!mobileMenuToggle.contains(e.target) && !navRight.contains(e.target)) {
                navRight.classList.remove('active');
            }
        });
    }
});
